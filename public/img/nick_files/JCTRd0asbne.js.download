if (self.CavalryLogger) { CavalryLogger.start_js(["s2nIy"]); }

__d('BlueBarFocusListener',['CSS','Deferred','Event'],(function a(b,c,d,e,f,g){var h='f_key',i='f_click',j=null,k=function r(){j=null;};function l(r){c('CSS').removeClass(r,h);c('CSS').removeClass(r,i);}function m(r){if(j)j.reject();j=new (c('Deferred'))();j.then(function(s){l(r);c('CSS').addClass(r,s);}).done(k,k);}function n(){if(j)j.resolve(h);}function o(r){if(j)j.reject();c('CSS').removeClass(r,h);c('CSS').addClass(r,i);}function p(r){return function(event){r(event.getTarget());};}var q={listen:function r(s){if(!s)return;c('Event').listen(s,'focusout',p(l));c('Event').listen(s,'focusin',p(m));c('Event').listen(s,'click',p(o));c('Event').listen(s,'keyup',n);}};f.exports=q;}),null);
__d('RoyalBluebar',['cx','Arbiter','CSS','Event','Run','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){var i={_subscriptionHandler:null,_getSubscriptionHandler:function j(){if(!this._subscriptionHandler){this._subscriptionHandler=new (c('SubscriptionsHandler'))();c('Run').onUnload(function(){this._subscriptionHandler.release();this._subscriptionHandler=null;}.bind(this));}return this._subscriptionHandler;},fixOnScroll:function j(k){this._getSubscriptionHandler().addSubscriptions(c('Arbiter').subscribe('bluebarFixedBehaviorController/isfixed',function(l,m){var n="_50ti",o="_33rf";if(k.firstChild instanceof Element)c('CSS').conditionClass(k.firstChild,n,m);if(k.firstChild instanceof Element)c('CSS').conditionClass(k.firstChild,o,!m);}));},informOnClick:function j(k){this._getSubscriptionHandler().addSubscriptions(c('Event').listen(k,'click',function(event){if(c('Arbiter').inform('BlueBar/homeClick',event)===false)event.preventDefault();}));}};f.exports=i;}),null);
__d('NotificationComponentsBootloader',['Promise','Bootloader'],(function a(b,c,d,e,f,g){'use strict';function h(){return new (c('Promise'))(function(i){c('Bootloader').loadModules(["NotificationList.react","NotificationJewelList.react"],function(j,k){i([j,k]);},'NotificationComponentsBootloader');});}f.exports={load:h};}),null);
__d("NotificationSeenFilter",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL:"all",SEEN_ONLY:"seen_only",UNSEEN_ONLY:"unseen_only",READ_ONLY:"read_only",UNREAD_ONLY:"unread_only",SEEN_BUT_UNREAD_ONLY:"seen_unread_only"});}),null);
__d('NotificationSeenState',['NotificationConstants','NotificationSeenFilter','NotificationUpdates','createObjectFrom'],(function a(b,c,d,e,f,g){var h=1,i=2,j=0,k=h,l=3,m=c('NotificationConstants').PayloadSourceType.INITIAL_LOAD,n={UNSEEN_AND_UNREAD:j,SEEN_BUT_UNREAD:k,SEEN_AND_READ:l},o={};function p(s){var t=[],u=[];Object.keys(s).forEach(function(v){var w=s[v],x=o[v];o[v]=w;if(x===undefined){t.push(v);u.push(v);return;}var y=x^w;if(y&h)t.push(v);if(y&i)u.push(v);});t.length&&c('NotificationUpdates').didUpdateSeenState(t);u.length&&c('NotificationUpdates').didUpdateReadState(u);}c('NotificationUpdates').subscribe('update-notifications',function(s,t){var u=t.nodes;if(!u||!u.length)return;var v=t.payloadsource,w=c('NotificationConstants').PayloadSourceType,x=v==w.ENDPOINT,y={};u.forEach(function(z){var aa=z.alert_id;if(!x||o[aa]===undefined)if(z.seen_state)y[aa]=n[z.seen_state];});p(y);});c('NotificationUpdates').subscribe('update-seen',function(s,t){if(!t.seenState)return;var u=[],v={};Object.keys(t.seenState).forEach(function(x){if(!t.seenState||!t.seenState[x]){u.push(x);return;}var y=o[x];if(y!==undefined)v[x]=y|h;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,j),v);p(w);});c('NotificationUpdates').subscribe('update-read',function(s,t){if(!t.readState)return;var u=[],v={};Object.keys(t.readState).forEach(function(x){if(!t.readState)return;var y=t.readState[x];if(y){u.push(x);return;}var z=o[x];if(z!==undefined){v[x]=z&~i;}else if(t.payloadsource==m)v[x]=k;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,l),v);p(w);});function q(s){var t=o[s];return t;}var r={isRead:function s(t){return q(t)===l;},isSeen:function s(t){return q(t)!==j;},getUnseenCount:function s(){return r.getUnseenIDs().length;},getUnseenIDs:function s(){return Object.keys(o).filter(function(t){return o[t]===j;});},getUnreadCount:function s(){return r.getUnreadIDs().length;},getUnreadIDs:function s(){return Object.keys(o).filter(function(t){return o[t]!==l;});},validateFilter:function s(t,u){switch(u){case c('NotificationSeenFilter').SEEN_ONLY:return r.isSeen(t);case c('NotificationSeenFilter').UNSEEN_ONLY:return !r.isSeen(t);case c('NotificationSeenFilter').READ_ONLY:return r.isRead(t);case c('NotificationSeenFilter').UNREAD_ONLY:return !r.isRead(t);case c('NotificationSeenFilter').SEEN_BUT_UNREAD_ONLY:return r.isSeen(t)&&!r.isRead(t);default:return true;}}};f.exports=r;}),6);
__d('NotificationJewelControllerModuleLoader',['JSResource','NotificationSeenState','NotificationStore','NotificationUpdates'],(function a(b,c,d,e,f,g){c('NotificationSeenState');c('NotificationStore');c('NotificationUpdates');f.exports=c('JSResource')('NotificationJewelController').__setRef('NotificationJewelControllerModuleLoader');}),null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUpdates','NotificationUserActions'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';c('Event').listen(i,'click',function(){c('NotificationUserActions').markAllNotificationsAsRead();});c('NotificationUpdates').subscribe('read-state-updated',function(){if(j)c('DOM').setContent(j,c('NotificationSeenState').getUnreadCount());});}f.exports=h;}),null);
__d('NotificationJewelListController',['NotificationComponentsBootloader','NotificationListConfig','React','ReactDOM'],(function a(b,c,d,e,f,g){var h=c('NotificationListConfig').numNotificationsPerPage,i=null,j=null;function k(l,m){'use strict';this.$NotificationJewelListController1=false;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=l;this.$NotificationJewelListController4=m;}k.prototype.open=function(){'use strict';this.$NotificationJewelListController1=true;this.$NotificationJewelListController5();};k.prototype.pause=function(){'use strict';this.$NotificationJewelListController2=true;this.$NotificationJewelListController5();};k.prototype.unpause=function(){'use strict';this.$NotificationJewelListController2=false;this.$NotificationJewelListController5();};k.prototype.$NotificationJewelListController5=function(){'use strict';if(!i||!j){c('NotificationComponentsBootloader').load().done(function(l){var m=l[0],n=l[1];i=m;j=n;this.$NotificationJewelListController6();}.bind(this));}else this.$NotificationJewelListController6();};k.prototype.$NotificationJewelListController6=function(){'use strict';if(!i||!j)return;c('ReactDOM').render(c('React').createElement(i,{hasEverBeenOpened:this.$NotificationJewelListController1,paused:this.$NotificationJewelListController2,tracking:this.$NotificationJewelListController4.tracking,negativeTracking:this.$NotificationJewelListController4.negativeTracking,shortenTimestamp:this.$NotificationJewelListController4.shortenTimestamp,businessID:this.$NotificationJewelListController4.businessID,maxHeight:this.$NotificationJewelListController4.maxHeight,useChevron:this.$NotificationJewelListController4.useChevron,chevronType:this.$NotificationJewelListController4.chevronType,numPerPage:h,listRenderer:j,upsell:this.$NotificationJewelListController4.upsell||null,endpoint:this.$NotificationJewelListController4.endpoint}),this.$NotificationJewelListController3);};f.exports=k;}),null);
__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});}),null);
__d("XBrowserPushXOutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});}),null);
__d("XServiceWorkerSessionChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/service_workers\/session\/persist\/",{});}),null);
__d('BrowserPushSessionChange.react',['cx','fbt','ix','AsyncRequest','BanzaiLogger','Image.react','ImageBlock.react','LayerFadeOnHide','React','ReloadPage','XBrowserPushDisabledController','XBrowserPushXOutController','XServiceWorkerSessionChangeController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:true,spin:false},this.$BrowserPushSessionChange1=function(t){if(t)return;this.setState({dialogShown:false});this.$BrowserPushSessionChange2('session_keep');var u=c('XServiceWorkerSessionChangeController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setMethod('post').setData({app_id:this.props.push.appID}).setAllowCrossPageTransition(true).setHandler(function(v){this.props.onHide();}.bind(this)).send();}.bind(this),this.$BrowserPushSessionChange3=function(){this.setState({spin:true});this.$BrowserPushSessionChange2('session_uninstall');this.$BrowserPushSessionChange2('xout');var t=c('XBrowserPushXOutController').getURIBuilder().getURI(),u=function(){this.props.push.unregisterPushAndSW(c('XBrowserPushDisabledController'),c('AsyncRequest')).done(function(v){c('ReloadPage').now();});}.bind(this);new (c('AsyncRequest'))().setURI(t).setMethod('post').setHandler(u).setAllowCrossPageTransition(true).send();}.bind(this),p;}n.prototype.$BrowserPushSessionChange2=function(event){'use strict';var o={event:event,appid:this.props.push.appID,surface:'session_change'};c('BanzaiLogger').log('BrowserPushLoggerConfig',o);};n.prototype.componentDidMount=function(){'use strict';this.$BrowserPushSessionChange2('session_change_prompt');};n.prototype.render=function(){'use strict';if(!this.state.dialogShown)return null;var o=j("92724");return c('React').createElement(c('XUIDialog.react'),{shown:true,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this.$BrowserPushSessionChange1,width:445,key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Desktop Notifications Are On")),c('React').createElement(c('XUIDialogBody.react'),null,this.state.spin?c('React').createElement(c('XUISpinner.react'),{size:'large'}):c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:o,alt:i._("Desktop Notifications Are On")}),c('React').createElement('div',null,c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'large'},i._("When you get a new notification, you'll see it in the corner of your screen."))),c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'small'},i._("To be sure you get notifications, you'll now stay logged into Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Undo"),onClick:this.$BrowserPushSessionChange3}),c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'})));};n.propTypes={onHide:m.func.isRequired,push:m.object.isRequired};f.exports=n;}),null);
__d('MockChromeBrowserNotification.react',['cx','fbt','ix','DOMContainer.react','Image.react','React','WorkModeConfig','isNode','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){var n=c('isNode')(this.props.message)?c('React').createElement(c('DOMContainer.react'),null,this.props.message):this.props.message;return c('React').createElement('section',{className:c('joinClasses')(this.props.className,"_257o")},c('React').createElement('span',{className:"_61kd"}),c('React').createElement(c('Image.react'),{className:"_ega",draggable:false,src:this.props.image}),c('React').createElement('div',{className:"_egb"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('p',null,n),c('React').createElement('cite',null,window.location.hostname)));};function m(){k.apply(this,arguments);}m.defaultProps={message:i._("You have new notifications."),image:j("76304")};f.exports=m;}),null);
__d('MockFirefoxBrowserNotification.react',['cx','fbt','ix','DOMContainer.react','Image.react','React','WorkModeConfig','isNode','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){var n=c('isNode')(this.props.message)?c('React').createElement(c('DOMContainer.react'),null,this.props.message):this.props.message,o=this.props.isWindows;return c('React').createElement('section',{className:c('joinClasses')(this.props.className,"_g5o")},o?this.$MockFirefoxBrowserNotification1(n):this.$MockFirefoxBrowserNotification2(n));};m.prototype.$MockFirefoxBrowserNotification2=function(n){return c('React').createElement('div',{className:"_g5p"},c('React').createElement('div',{className:"_g5q"},c('React').createElement(c('Image.react'),{draggable:false,src:j("355144")})),c('React').createElement('div',{className:"_g5r"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('cite',null,window.location.hostname),c('React').createElement('p',null,n)),c('React').createElement(c('Image.react'),{className:"_g5u",draggable:false,src:this.props.image}));};m.prototype.$MockFirefoxBrowserNotification1=function(n){return c('React').createElement('div',{className:"_g5w"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('div',{className:"_g5x"},c('React').createElement('span',{className:"_g5z"}),c('React').createElement('span',{className:"_g7w"})),c('React').createElement('div',{className:"_g5r"},c('React').createElement(c('Image.react'),{className:"_g5u",draggable:false,src:this.props.image}),c('React').createElement('div',{className:"_g7x"},c('React').createElement('p',null,n),c('React').createElement('cite',null,window.location.hostname))));};function m(){k.apply(this,arguments);}m.defaultProps={message:i._("You have new notifications."),image:j("355145"),isWindows:false};f.exports=m;}),null);
__d('MockBrowserNotification.react',['MockChromeBrowserNotification.react','MockFirefoxBrowserNotification.react','React','UserAgent'],(function a(b,c,d,e,f,g){'use strict';f.exports=function h(i){var j=c('UserAgent').isPlatform('Windows');if(c('UserAgent').isBrowser('Firefox'))return c('React').createElement(c('MockFirefoxBrowserNotification.react'),babelHelpers['extends']({},i,{isWindows:j}));return c('React').createElement(c('MockChromeBrowserNotification.react'),babelHelpers['extends']({},i,{isWindows:j}));};}),null);
__d('NotificationPermissionNotice.react',['cx','fbt','Event','Keys','React','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=[],m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.componentDidMount=function(){'use strict';l.push(c('Event').listen(window,'mousedown',this.props.onHide));l.push(c('Event').listen(window,'keydown',function(event){if(event.keyCode===c('Keys').ESC)this.props.onHide();}.bind(this)));};n.prototype.componentWillUnmount=function(){'use strict';while(l.length>0){var o=l.pop();o.remove();}};n.prototype.renderLayers=function(){'use strict';var o=this.props.shortText?i._("Click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]):i._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]);return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.noticeAnchor;}.bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide,key:'nux'},o);};n.prototype.render=function(){'use strict';return c('React').createElement('span',null,c('React').createElement('span',{ref:'noticeAnchor',className:"_1_i1"}),this.renderLayers());};function n(){'use strict';j.apply(this,arguments);}n.propTypes={onHide:m.func.isRequired,shortText:m.bool,browserName:m.string.isRequired};f.exports=n;}),null);
__d('NotificationPermissionRequest.react',['cx','React','Spotlight.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';return c('React').createElement(c('Spotlight.react'),{shown:true,onHide:this.props.onHide,key:'spotlight'},c('React').createElement('div',{className:"_n3"}));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={onHide:k.func};f.exports=l;}),null);
__d('NotificationPermissionRequestWithPreview.react',['cx','fbt','ix','BrowserPushStrings','Image.react','ImageBlock.react','MockBrowserNotification.react','React','Spotlight.react','XUIAmbientNUX.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=function o(p){var q=void 0;return c('React').createElement(c('Spotlight.react'),{onHide:p.onHide,shown:p.shown,wash:'xui'},c('React').createElement('span',{ref:function r(s){return q=s;},className:"_m4w"}),c('React').createElement('div',{className:"_n3"},c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function r(){return q;},key:'nux',shown:p.shown,onCloseButtonClick:p.onHide,position:'below'},c('React').createElement('strong',null,i._("Almost Done!")),c('React').createElement('br',null),i._("Now, click \"Allow\" to finish activating notifications."))));};k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={acceptPromptShown:false,dialogShown:true,spinnerShown:false},this.$NotificationPermissionRequestWithPreview2=function(t){this.setState({dialogShown:t});}.bind(this),this.$NotificationPermissionRequestWithPreview3=function(){this.setState({acceptPromptShown:!this.props.showSpinnerWhileRequesting,dialogShown:this.props.showSpinnerWhileRequesting,spinnerShown:this.props.showSpinnerWhileRequesting});this.props.onAccept&&this.props.onAccept(this.$NotificationPermissionRequestWithPreview4);}.bind(this),this.$NotificationPermissionRequestWithPreview4=function(){if(this.$NotificationPermissionRequestWithPreview1)this.setState({acceptPromptShown:false,dialogShown:false});}.bind(this),this.$NotificationPermissionRequestWithPreview5=function(){this.setState({acceptPromptShown:false});}.bind(this),p;}n.prototype.componentWillMount=function(){this.$NotificationPermissionRequestWithPreview1=true;};n.prototype.componentWillUnmount=function(){this.$NotificationPermissionRequestWithPreview1=false;};n.prototype.render=function(){var o=this.props,p=o.notificationImage,q=o.notificationMessage,r=c('React').createElement(c('MockBrowserNotification.react'),{className:"_m4x",image:p,message:q}),s=this.state.spinnerShown?c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{draggable:false,src:j("287648")}),c('React').createElement('div',null,c('React').createElement('strong',null,i._("Almost Done!")),c('React').createElement('p',null,i._("Now, click \"Allow\" to finish activating notifications."))))):c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{draggable:false,src:j("287648")}),c('React').createElement('div',null,c('BrowserPushStrings').explanation)),r),t=this.state.spinnerShown?null:c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Not Now"),onClick:this.props.onClose}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Turn On"),onClick:this.$NotificationPermissionRequestWithPreview3,use:'special'}));return c('React').createElement('div',{className:"_m4y"},c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.$NotificationPermissionRequestWithPreview2,shown:this.state.dialogShown,titleID:'notification-permission-title',width:445},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('React').createElement('span',{id:'notification-permission-title'},c('BrowserPushStrings').turn_on)),s,t),c('React').createElement(m,{shown:this.state.acceptPromptShown,onHide:this.$NotificationPermissionRequestWithPreview5}));};f.exports=n;}),null);
__d('incognito',['regeneratorRuntime','Promise','UserAgent','WebStorage'],(function a(b,c,d,e,f,g){'use strict';function h(){var i;return c('regeneratorRuntime').async(function j(k){while(1)switch(k.prev=k.next){case 0:i=window.RequestFileSystem||window.webkitRequestFileSystem;if(!i){k.next=3;break;}return k.abrupt('return',new (c('Promise'))(function(l){return i(window.TEMPORARY,10,function(){return l(false);},function(){return l(true);});}));case 3:if(!(c('UserAgent').isBrowser('IE >= 10')||c('UserAgent').isBrowser('Edge'))){k.next=5;break;}return k.abrupt('return',!window.indexedDB);case 5:if(!c('UserAgent').isBrowser('Firefox >= 16')){k.next=7;break;}return k.abrupt('return',new (c('Promise'))(function(l){var m=window.indexedDB.open('__test__');m.onsuccess=function(){return l(false);};m.onerror=function(n){n.preventDefault();l(true);};}));case 7:if(!c('UserAgent').isBrowser('Safari')){k.next=9;break;}return k.abrupt('return',!c('WebStorage').getLocalStorage());case 9:return k.abrupt('return',false);case 10:case 'end':return k.stop();}},null,this);}f.exports=h;}),null);
__d('CrossWindowEventEmitter',['CacheStorage','EventEmitter','FBJSON'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$CrossWindowEventEmitter2=k;this.$CrossWindowEventEmitter1=new (c('CacheStorage'))('localstorage',k+':');this.$CrossWindowEventEmitter1.addValueChangeCallback(function(l,m,n){var o,event=l.split(':')[1],p=c('FBJSON').parse(n),q=p.__v;(o=i.emit).call.apply(o,[this,event].concat(q));}.bind(this));}j.prototype.emit=function(k){var l;for(var m=arguments.length,n=Array(m>1?m-1:0),o=1;o<m;o++)n[o-1]=arguments[o];this.emitRemote.apply(this,[k].concat(n));(l=i.emit).call.apply(l,[this,k].concat(n));};j.prototype.emitRemote=function(k){for(var l=arguments.length,m=Array(l>1?l-1:0),n=1;n<l;n++)m[n-1]=arguments[n];this.$CrossWindowEventEmitter1.set(k,m);};f.exports=j;}),null);
__d('FriendingSurfaceVisitationTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FriendingSurfaceVisitationLoggerConfig',this.$FriendingSurfaceVisitationTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FriendingSurfaceVisitationLoggerConfig',this.$FriendingSurfaceVisitationTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FriendingSurfaceVisitationTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FriendingSurfaceVisitationTypedLogger1=babelHelpers['extends']({},this.$FriendingSurfaceVisitationTypedLogger1,j);return this;};h.prototype.setAppVersion=function(j){this.$FriendingSurfaceVisitationTypedLogger1.app_version=j;return this;};h.prototype.setBadgeCount=function(j){this.$FriendingSurfaceVisitationTypedLogger1.badge_count=j;return this;};h.prototype.setClientTimestamp=function(j){this.$FriendingSurfaceVisitationTypedLogger1.client_timestamp=j;return this;};h.prototype.setRawRefTab=function(j){this.$FriendingSurfaceVisitationTypedLogger1.raw_ref_tab=j;return this;};h.prototype.setRawTab=function(j){this.$FriendingSurfaceVisitationTypedLogger1.raw_tab=j;return this;};h.prototype.setRefPage=function(j){this.$FriendingSurfaceVisitationTypedLogger1.ref_page=j;return this;};h.prototype.setSurface=function(j){this.$FriendingSurfaceVisitationTypedLogger1.surface=j;return this;};h.prototype.setTargetProfileID=function(j){this.$FriendingSurfaceVisitationTypedLogger1.target_profile_id=j;return this;};h.prototype.setVC=function(j){this.$FriendingSurfaceVisitationTypedLogger1.vc=j;return this;};var i={app_version:true,badge_count:true,client_timestamp:true,raw_ref_tab:true,raw_tab:true,ref_page:true,surface:true,target_profile_id:true,vc:true};f.exports=h;}),null);
__d('JewelCountSideLoader',['invariant','CSS'],(function a(b,c,d,e,f,g,h){var i={},j={},k={},l={queueInstances:function m(n,o,p){i[n]={badge:o,root:p};},updateCountAndQueueArgs:function m(n,o,p){var q=j[n];if(q){q.updateCountAndArgs(p,o);return;}var r=i[n];r||h(0);k[n]={count:o,args:p};c('CSS').conditionClass(r.root,'hasNew',!!o);r.badge.setLegacyContent(o);return;},getOverwritesForJewel:function m(n){if(k[n.name])return k[n.name];j[n.name]=n;return null;}};f.exports=l;}),null);
__d('NotificationJewelFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={FUNNEL_LOGGING_NAME:'WWW_NOTIFICATION_FUNNEL',FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:'fetch_notifications',OPEN_JEWEL:'open_jewel',CLOSE_JEWEL:'close_jewel',MOUSE_OVER_ON_JEWEL:'mouse_over_on_jewel',SCROLL_TO_FETCH:'scroll_to_fetch',FETCH_NEXT_SET:'fetch_next_set',CLEAR_BADGE_COUNT:'clear_badge_count'}};}),null);
__d('JewelBase',['csx','Promise','Arbiter','ArbiterMixin','CrossWindowEventEmitter','CSS','DOM','Event','HTML','JewelCountSideLoader','Keys','MercuryMessengerJewelPerfConfig','Run','TabIsolation','Toggler','TooltipData','FunnelLogger','NotificationJewelFunnelLoggingConstants','mixin','reportData','FriendingSurfaceVisitationTypedLogger'],(function a(b,c,d,e,f,g,h){var i,j,k=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,l=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,m=new (c('CrossWindowEventEmitter'))('JewelBase'),n={};i=babelHelpers.inherits(o,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function o(p,q){'use strict';j.constructor.call(this);this.name=q.name;this.label=q.label;this.root=p;this.badge=q.badge;this.countNew=0;this.initialCount=q.count||0;this.escHandler=null;this.bootload_module=q.bootload_module;this.bootload_args=q.bootload_args;this.bootload_eager_modules=q.bootload_eager_modules;this.bootloading=null;this.togglerInstance=c('Toggler').getInstance(p).setSticky(false);if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction){this.$JewelBase1();}else c('Run').onAfterLoad(function(){return this.$JewelBase2();}.bind(this));if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction)this.$JewelBase3();if(q.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this.$JewelBase4.bind(this));n[this.name]=this;this.$JewelBase5();var r=this.getFlyout(),s=new (c('TabIsolation'))(r);c('Toggler').createInstance(r).setSticky(false);this.$JewelBase6();c('Toggler').listen('show',this.root,function(t){c('FunnelLogger').appendAction(k,l.OPEN_JEWEL);this.inform('open');this.$JewelBase7();this.hasNew()&&this.markSeen();this.reset();c('Arbiter').inform('layer_shown',{type:'Jewel'});s.enable();this.setupEvents();this.$JewelBase8();if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction){this.$JewelBase9();}else this.$JewelBase2().then(function(){return this.inform('opened');}.bind(this)).done();}.bind(this));c('Toggler').listen('hide',this.root,function(t,u){c('FunnelLogger').appendAction(k,l.CLOSE_JEWEL);c('FunnelLogger').endFunnel(k);this.hasNew()&&this.markSeen();this.reset();this.inform('closed');c('Arbiter').inform('layer_hidden',{type:'Jewel'});s.disable();this.removeEvents();this.$JewelBase6();}.bind(this));c('Arbiter').subscribe('jewel/count-updated',function(t,u){u.jewel==this.name&&this.update(u);}.bind(this));c('Arbiter').subscribe('jewel/hide',function(t,u){this.hide();}.bind(this));m.addListener('count-updated',function(t){t.jewel==this.name&&this.update(t);}.bind(this));}o.prototype.getRoot=function(){'use strict';return this.root;};o.prototype.hide=function(){'use strict';if(this.isOpen())c('Toggler').hide(this.root);};o.prototype.getFlyout=function(){'use strict';if(this.$JewelBase10===undefined)this.$JewelBase10=c('DOM').find(this.root,".__tw");return this.$JewelBase10;};o.prototype.hasNew=function(){'use strict';return c('CSS').hasClass(this.root,'hasNew');};o.prototype.isOpen=function(){'use strict';return c('CSS').hasClass(this.root,'openToggler');};o.prototype.reset=function(){'use strict';c('FunnelLogger').appendAction(k,l.CLEAR_BADGE_COUNT);c('CSS').removeClass(this.root,'hasNew');};o.prototype.setContent=function(p){'use strict';var q=c('DOM').find(this.root,'ul.jewelItemList');c('DOM').setContent(q,c('HTML')(p));};o.prototype.update=function(p){'use strict';if(p.animation&&this.badge.setAnimation)this.badge.setAnimation(p.animation);this.countNew=p.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var q=isNaN(this.countNew)||this.countNew>0;c('CSS').conditionClass(this.root,'hasNew',q);this.inform('updated',p,c('Arbiter').BEHAVIOR_STATE);};o.prototype.setupEvents=function(){'use strict';this.escHandler=c('Event').listen(document.documentElement,'keydown',function(p){if(p.keyCode===c('Keys').ESC)this.hide();}.bind(this));};o.prototype.removeEvents=function(){'use strict';if(this.escHandler){this.escHandler.remove();this.escHandler=null;}};o.prototype.markSeen=function(){'use strict';c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:0},c('Arbiter').BEHAVIOR_STATE);m.emitRemote('count-updated',{jewel:this.name,count:0});this.inform('marked-seen');};o.prototype.getButton=function(){'use strict';if(typeof this.$JewelBase11==='undefined')this.$JewelBase11=c('DOM').find(this.root,"a.jewelButton");return this.$JewelBase11;};o.prototype.$JewelBase6=function(){'use strict';var p=this.getButton();c('TooltipData').set(p,this.label);p.setAttribute('data-tooltip-delay','500');};o.prototype.$JewelBase8=function(){'use strict';c('TooltipData').remove(this.getButton());};o.prototype.$JewelBase4=function(p,q){'use strict';if(!this.$JewelBase12(q.from)&&!this.$JewelBase12(q.to))this.togglerInstance&&this.togglerInstance.hide();};o.prototype.$JewelBase12=function(p){'use strict';return p&&Object.prototype.hasOwnProperty.call(p.getQueryData(),'theater');};o.prototype.$JewelBase7=function(){'use strict';c('reportData')('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});if(this.name==='requests')new (c('FriendingSurfaceVisitationTypedLogger'))().setSurface('jewel').setBadgeCount(this.countNew).log();};o.prototype.$JewelBase2=function(){'use strict';if(!this.bootload_module)return c('Promise').resolve();if(!this.bootloading)this.bootloading=new (c('Promise'))(function(p,q){this.bootload_module.load().then(function(r){new r(this,this.bootload_args);p();}.bind(this))['catch'](q);}.bind(this));return this.bootloading;};o.prototype.$JewelBase1=function(){'use strict';if(this.bootload_eager_modules){c('Run').onAfterLoad(function(){return this.bootload_eager_modules.loadModules(this);}.bind(this));}else c('Run').onAfterLoad(function(){return this.$JewelBase2();}.bind(this));};o.prototype.$JewelBase3=function(){'use strict';this.bootload_eager_modules&&this.bootload_eager_modules.mount(this);};o.prototype.$JewelBase9=function(){'use strict';if(this.bootload_eager_modules){this.bootload_eager_modules.load(this);}else this.$JewelBase2().then(function(){return this.inform('opened');}.bind(this)).done();};o.prototype.$JewelBase5=function(){'use strict';if(this.bootloading)return;var p=c('JewelCountSideLoader').getOverwritesForJewel(this);if(!p)return;this.updateCountAndArgs(p.args,p.count);};o.prototype.updateCountAndArgs=function(p,q){'use strict';for(var r in p)if(p[r])this.bootload_args[r]=p[r];if(q)c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:q},c('Arbiter').BEHAVIOR_STATE);};f.exports=o;}),null);
__d('ModalMask',['DOM'],(function a(b,c,d,e,f,g){var h=null,i=0,j={show:function k(){i++;if(!h){h=c('DOM').create('div',{id:'modalMaskOverlay'});c('DOM').appendContent(document.body,h);}},hide:function k(){if(i){i--;if(!i&&h){c('DOM').remove(h);h=null;}}},getNode:function k(){return h;}};f.exports=j;}),null);
__d('LitestandChromeHomeBadge',['cx','Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','UserAgent','formatNumber'],(function a(b,c,d,e,f,g,h){var i=300000,j={},k=void 0,l=void 0;function m(){l&&clearTimeout(l);if(k)return;l=setTimeout(n,i);}function n(){if(k)return;new (c('AsyncRequest'))().setURI('/ajax/litestand/newsfeed_count').setHandler(function(q){if(k)return;p.setCount(q.getPayload());m();}).setAllowCrossPageTransition(true).send();}function o(q){if(j.badgeNode){c('CSS').conditionClass(j.badgeNode,"_2527",q>0);}else{if(j.badgeNode)c('CSS').conditionClass(j.badgeNode,"_461d",q>0);if(q>0){var r=c('formatNumber').withMaxLimit(q,j.maxCount);c('DOM').setContent(j.countNode,r);}}}var p={init:function q(r){j=r;c('Event').listen(j.homeNode,'click',function(event){var s=event.getModifiers(),t=s.shift,u=s.meta,v=s.control;if(t||c('UserAgent').isPlatform('Mac OS X')&&u||c('UserAgent').isPlatform('Windows')&&v)o(0);});c('Arbiter').subscribe(c('LitestandMessages').NEWSFEED_LOAD,function(){k=true;this.setCount(0);}.bind(this));c('Arbiter').subscribe(c('LitestandMessages').LEAVE_HOME,function(){k=false;m();});m();},setCount:function q(r){o(k?0:r);}};f.exports=p;}),null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],(function a(b,c,d,e,f,g){var h={init:function i(j,k){var l=c('Event').listen(j,'click',function(m){m.preventDefault();var n=c('ge')(k);if(n){c('Focus').set(n);c('AccessibilityLogger').logSRKey();}else c('warning')(n,'Failed to set focus on element with ID: %s',k);});c('onEnclosingPageletDestroy')(j,function(){return l.remove();});}};f.exports=h;}),null);
__d("CSSClassTransition",[],(function a(b,c,d,e,f,g){var h=[];function i(){}Object.assign(i,{go:function j(k,l,m,n){var o;for(var p=0;p<h.length;p++)if(h[p](k,l,m,n)===true)o=true;if(!o)k.className=l;},registerHandler:function j(k){h.push(k);return {remove:function l(){var m=h.indexOf(k);if(m>=0)h.splice(m,1);}};}});f.exports=i;}),null);
__d('QuicklingAugmenter',['URI'],(function a(b,c,d,e,f,g){var h=[],i={addHandler:function j(k){h.push(k);},augmentURI:function j(k){var l=[],m=new (c('URI'))(k);h.forEach(function(n){var o=n(m);if(!o)return m;l.push(n);m=m.addQueryData(o);});h=l;return m;}};f.exports=i;}),null);
__d('cancelIdleCallback',['IdleCallbackImplementation','TimerStorage'],(function a(b,c,d,e,f,g){f.exports=function(){for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];c('TimerStorage').unset(c('TimerStorage').IDLE_CALLBACK,i[0]);return Function.prototype.apply.call(c('IdleCallbackImplementation').cancelIdleCallback,b,i);};}),null);
__d('Quickling',['AjaxPipeRequest','Arbiter','CSSClassTransition','DocumentTitle','DOM','HTML','PageHooks','PageEvents','PageNavigationStageLogger','PageTransitionsRegistrar','QuicklingAugmenter','QuicklingConfig','Run','URI','UserAgent_DEPRECATED','PHPQuerySerializer','TimerStorage','cancelAnimationFrame','cancelIdleCallback','clearImmediate','clearInterval','clearTimeout','goOrReplace','isEmpty','requireWeak','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h,i,j;c('requireWeak')('PageTransitions',function(w){j=w;});var k=c('QuicklingConfig').version,l=c('QuicklingConfig').sessionLength,m=new RegExp(c('QuicklingConfig').inactivePageRegex),n=0,o,p='',q={isActive:function w(){return true;},isPageActive:function w(x){if(x=='#')return false;x=new (c('URI'))(x);if(x.getDomain()&&x.getDomain()!=new (c('URI'))(window.location.href).getDomain())return false;if(x.getPath()=='/l.php'){var y=x.getQueryData().u;if(y){y=new (c('URI'))(unescape(y)).getDomain();if(y&&y!=new (c('URI'))(window.location.href).getDomain())return false;}}var z=x.getPath(),aa=x.getQueryData();if(!c('isEmpty')(aa))z+='?'+c('PHPQuerySerializer').serialize(aa);if(Object.keys(aa).reduce(function(ba,ca){return ba||c('QuicklingConfig').badRequestKeys.includes(ca);},false))return false;return !m.test(z);},getLoadCount:function w(){return n;}};function r(w){w=w||'Facebook';c('DocumentTitle').set(w);if(c('UserAgent_DEPRECATED').ie()){p=w;if(!o)o=window.setInterval(function(){var x=p,y=c('DocumentTitle').get();if(x!=y)c('DocumentTitle').set(x);},5000,false);}}h=babelHelpers.inherits(s,c('AjaxPipeRequest'));i=h&&h.prototype;function s(w){'use strict';var x={version:k};i.constructor.call(this,w,{quickling:x});this._isQuickling=true;}s.prototype._preBootloadFirstResponse=function(w){'use strict';return true;};s.prototype._fireDomContentCallback=function(){'use strict';this._request.cavalry&&this._request.cavalry.setTimeStamp('t_domcontent');if(j)j.transitionComplete();this._onPageDisplayed&&this._onPageDisplayed(this.pipe);i._fireDomContentCallback.call(this);};s.prototype._fireOnloadCallback=function(){'use strict';if(this._request.cavalry){this._request.cavalry.setTimeStamp('t_hooks');this._request.cavalry.setTimeStamp('t_layout');this._request.cavalry.setTimeStamp('t_onload');}i._fireOnloadCallback.call(this);};s.prototype.isPageActive=function(w){'use strict';return q.isPageActive(w);};s.prototype._versionCheck=function(w){'use strict';if(w.version==k)return true;var x=['quickling','ajaxpipe','ajaxpipe_token'];c('PageNavigationStageLogger').setCookieForNavigation(w.uri);c('PageNavigationStageLogger').setNote('quickling_version');c('PageNavigationStageLogger').updateCookie();c('goOrReplace')(window.location,new (c('URI'))(w.uri).removeQueryData(x),true);return false;};s.prototype._processFirstResponse=function(w){'use strict';var x=w.getPayload();r(x.title);window.scrollTo(0,0);c('CSSClassTransition').go(document.body,x.body_class||'',j.getMostRecentURI(),w.getRequest().getURI());c('Arbiter').inform('quickling/response');};s.prototype.getSanitizedParameters=function(){'use strict';return ['quickling'];};s.prototype.getAsyncRequestType=function(){'use strict';return 'useIframeTransport';};function t(){n++;return n>=l;}function u(w){c('AjaxPipeRequest').setCurrentRequest(null);if(t()){c('PageNavigationStageLogger').setNote('quickling_refresh');return false;}w=c('QuicklingAugmenter').augmentURI(w);if(!q.isPageActive(w)){c('PageNavigationStageLogger').setNote('quickling_inactive');return false;}c('TimerStorage').clearAll(c('TimerStorage').ANIMATION_FRAME,c('cancelAnimationFrame'));c('TimerStorage').clearAll(c('TimerStorage').IDLE_CALLBACK,c('cancelIdleCallback'));c('TimerStorage').clearAll(c('TimerStorage').IMMEDIATE,c('clearImmediate'));c('TimerStorage').clearAll(c('TimerStorage').INTERVAL,c('clearInterval'));c('TimerStorage').clearAll(c('TimerStorage').TIMEOUT,c('clearTimeout'));window.ExitTime=Date.now();c('Run').__removeHook(c('PageHooks').ONLOAD_HOOK);c('Run').__removeHook(c('PageHooks').DOMREADY_HOOK);c('Arbiter').inform(c('PageEvents').AJAXPIPE_ONUNLOAD,{transition_type:'quickling'});v();new s(w).setCanvasId('content').send();var x=window.__bodyWrapper;if(x.getCodeUsage)x.clearCodeUsage();return c('PageTransitionsRegistrar').DELAY_HISTORY;}function v(){var w=function x(){c('PageHooks').runHooks('onleavehooks');};if(c('QuicklingConfig').useAsyncLeaveHooks){c('setTimeoutAcrossTransitions')(w,0);}else w();}c('Run').onAfterLoad(function w(){c('PageTransitionsRegistrar').registerHandler(u,1);});f.exports=b.Quickling=q;}),null);
__d('XHPTemplate',['DataStore','DOM','HTML','XHPTemplateProcessor'],(function a(b,c,d,e,f,g){var h=c('XHPTemplateProcessor').processor;function i(k){'use strict';if(h instanceof Function)k=h(k);this._model=k;}i.prototype.render=function(){'use strict';if(c('HTML').isHTML(this._model))this._model=c('DOM').setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};i.prototype.build=function(){'use strict';return new j(this.render());};i.getNode=function(k,l){'use strict';return i.getNodes(k)[l];};i.getNodes=function(k){'use strict';var l=c('DataStore').get(k,'XHPTemplate:nodes');if(!l){l={};var m=c('DOM').scry(k,'[data-jsid]');m.push(k);var n=m.length;while(n--){var o=m[n];l[o.getAttribute('data-jsid')]=o;o.removeAttribute('data-jsid');}c('DataStore').set(k,'XHPTemplate:nodes',l);}return l;};function j(k){'use strict';this._root=k;this._populateNodes();}j.prototype._populateNodes=function(){'use strict';this._nodes={};this._leaves={};var k=this._root.getElementsByTagName('*');for(var l=0,m=k.length;l<m;l++){var n=k[l],o=n.getAttribute('data-jsid');if(o){n.removeAttribute('data-jsid');this._nodes[o]=n;this._leaves[o]=!n.childNodes.length;}}};j.prototype.getRoot=function(){'use strict';return this._root;};j.prototype.getNode=function(k){'use strict';return this._nodes[k];};j.prototype.setNodeProperty=function(k,l,m){'use strict';this.getNode(k)[l]=m;return this;};j.prototype.setNodeContent=function(k,l){'use strict';if(!this._leaves[k])throw new Error("Can't setContent on non-leaf node: "+k);c('DOM').setContent(this.getNode(k),l);return this;};f.exports=i;}),null);
__d('BrowserPushCommands',[],(function a(b,c,d,e,f,g){var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;}),null);
__d('BrowserPushMessageRedirectUtil',['Bootloader'],(function a(b,c,d,e,f,g){var h=function i(j){var k='(messages)(.*?)(?:(tid=))([^&]*)',l=j.match(k);if(!l)return true;var m=l.pop();c('Bootloader').loadModules(["FantaTabActions"],function(n){n.openTab(m);},'BrowserPushMessageRedirectUtil');return false;};f.exports=h;}),null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','BrowserPushMessageRedirectUtil','EventListener','URI','URISchemes','isFacebookURI'],(function a(b,c,d,e,f,g){function h(event){if(event.data.command&&event.data.command===c('BrowserPushCommands').REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:true});}else{event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:false});return;}var j=event.data.uri;if(/^([^.:/?#]+):/.test(j)&&!c('URISchemes').isAllowed(/^([^.:/?#]+):/.exec(j)[1])||!c('isFacebookURI')(new (c('URI'))(j)))throw new Error('goURI: URI scheme rejected, URI: '+j);if(c('BrowserPushMessageRedirectUtil')(j))window.location.href=j;}}var i={registerRedirectHandler:function j(){c('EventListener').listen(window,'message',function(event){if(event.origin==='')h(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))h(event);});}};f.exports=i;}),null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],(function a(b,c,d,e,f,g){function h(){new (c('ClientServiceWorkerMessage'))(c('BrowserPushCommands').WINDOW_VISIBLE,null).sendViaController();}var i={listenForVisibility:function j(){if(!c('Visibility').isHidden())h();c('Visibility').addListener(c('Visibility').VISIBLE,h);}};f.exports=i;}),null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration','emptyFunction'],(function a(b,c,d,e,f,g){var h=window.Notification,i=new (c('Map'))();j.get=function(k,l){'use strict';if(i.has(l))return i.get(l);var m=new j(k,l);i.set(l,m);return m;};function j(k,l){'use strict';this.$PushRegistration3=k;this.appID=l;if(!j.$PushRegistration1&&!j.$PushRegistration2){j.$PushRegistration1=false;j.$PushRegistration2=false;}}j.prototype.getPushSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){if(j.pushPermissionIsDenied())l(new Error('No permission or not supported'));c('ServiceWorkerRegistration').getWorkerRegistration(this.$PushRegistration3).then(function(m){if(!m){k(null);return;}m.pushManager.getSubscription().then(function(n){k(n);})['catch'](l);})['catch'](l);}.bind(this));};j.prototype.$PushRegistration4=function(k){'use strict';var l=k.endpoint;if('subscriptionId' in k&&!new RegExp('/'+k.subscriptionId+'$').test(l))l+='/'+k.subscriptionId;return l;};j.prototype.$PushRegistration5=function(k,l,m,n){'use strict';var o=this.$PushRegistration4(m),p=k.getURIBuilder().getURI(),q=new l(p),r=null;if(m.toJSON){r=m.toJSON().keys;}else if(m.keys)r=m.keys;q.setData({app_id:this.appID,push_endpoint:o,subscription_keys:JSON.stringify(r)});q.setMethod('post');if(q.setHandler)q.setHandler(function(s){if(s.payload&&s.payload.session_change)n();});q.send();};j.prototype.getSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){this.getPushSubscription().then(function(m){if(m){k(this.$PushRegistration4(m));}else k(null);}.bind(this))['catch'](l);}.bind(this));};j.prototype.maybeRegisterPushAgain=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){this.getPushSubscription().then(function(p){if(p){this.$PushRegistration5(k,l,p,m);n(this.$PushRegistration4(p));}else n(null);}.bind(this))['catch'](function(){n(null);});}.bind(this));};j.prototype.$PushRegistration6=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){if(j.$PushRegistration2&&!m){o(new Error('sending disable info already'));return;}j.$PushRegistration2=true;var p=k.getURIBuilder().getURI(),q=new l(p.toString());q.setData({appid:this.appID,from_browser_settings:m});q.setMethod('post');if(q.listen){q.listen('finally',n);q.listen('fail',function(){j.$PushRegistration2=false;o();});}else if(q.setErrorHandler&&q.setHandler){q.setErrorHandler(function(){j.$PushRegistration2=false;o();});q.setHandler(n);}else n();q.send();}.bind(this));};j.prototype.isPushRegistered=function(k,l,m,n){var o=arguments.length<=4||arguments[4]===undefined?false:arguments[4],p=arguments.length<=5||arguments[5]===undefined?c('emptyFunction'):arguments[5],q=arguments.length<=6||arguments[6]===undefined?false:arguments[6];'use strict';c('BrowserPushMessageHandler').registerRedirectHandler();return new (c('Promise'))(function(r,s){this.getPushSubscription().then(function(t){r(!!t||k&&!j.pushPermissionIsPending());if(t){if(o){self.$PushRegistration5(l,n,p,q);}else c('BrowserPushVisibilityChanger').listenForVisibility();}else if(!t&&k)if(j.pushPermissionIsOn()){this.registerPush(l,n,p,q)['catch'](function(){});}else this.$PushRegistration6(m,n,false);}.bind(this))['catch'](function(){if(k){this.$PushRegistration6(m,n,false);s();}if(q)c('ServiceWorkerRegistration').unregisterControllingWorker();}.bind(this));}.bind(this));};j.prototype.$PushRegistration7=function(){'use strict';return new (c('Promise'))(function(k,l){h.requestPermission(k);});};j.prototype.registerPushAndWaitForEndpoint=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration8(k,l,m,true,null,n).then(function(q){if(typeof q!=='string'){p(new Error('registerPushImpl did not return an endpoint'));return;}o(q);})['catch'](p);}.bind(this));};j.prototype.registerPushOnKaiOS=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){m.waitForKaiOS().done(function(){m.registerPush(function(p){var q=JSON.parse(p.get('push_endpoint'));this.$PushRegistration5(k,l,q,c('emptyFunction'));n(this.$PushRegistration4(q));}.bind(this));}.bind(this));}.bind(this));};j.prototype.registerPush=function(k,l){var m=arguments.length<=2||arguments[2]===undefined?c('emptyFunction'):arguments[2],n=arguments.length<=3||arguments[3]===undefined?false:arguments[3];'use strict';return this.registerPushWithFinishedCallBack(k,l,m,null,n);};j.prototype.registerPushWithFinishedCallBack=function(k,l,m,n,o){'use strict';return new (c('Promise'))(function(p,q){this.$PushRegistration8(k,l,m,false,n,o).then(function(r){if(typeof r!=='boolean'){q(new Error('registerPushImpl did not return a boolean'));return;}p(r);})['catch'](q);}.bind(this));};j.prototype.$PushRegistration8=function(k,l,m,n,o,p){'use strict';if(j.$PushRegistration1)return new (c('Promise'))(function(q,r){r(new Error('registering already'));});j.$PushRegistration1=true;return new (c('Promise'))(function(q,r){var s=c('ServiceWorkerRegistration').registerWorkerIfUnregistered(this.$PushRegistration3),t=this.$PushRegistration7();c('Promise').all([s,t]).then(function(u){var v=u[0];if(!j.pushPermissionIsOn()){if(p)v.unregister();throw new Error('Push permission was denied');}if(!n)q(true);v.pushManager.subscribe({userVisibleOnly:true}).then(function(w){if(n)q(this.$PushRegistration4(w));this.$PushRegistration5(k,l,w,m);if(o)o();c('BrowserPushVisibilityChanger').listenForVisibility();}.bind(this))['catch'](function(w){j.$PushRegistration1=false;if(p)v.unregister();r(w);});}.bind(this))['catch'](function(u){j.$PushRegistration1=false;r(u);});}.bind(this));};j.prototype.unregisterPushAndSWOnKaiOS=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration6(k,l,n).then(function(){m.unregisterPush();o();})['catch'](p);}.bind(this));};j.prototype.unregisterPushAndSW=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.$PushRegistration6(k,l,true).then(function(){c('ServiceWorkerRegistration').unregisterControllingWorker().done(m);})['catch'](n);}.bind(this));};j.prototype.unregisterPushOnly=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.getPushSubscription().then(function(o){if(o){o.unsubscribe().then(this.$PushRegistration6(k,l,true)).then(function(){m(true);})['catch'](n);}else n();}.bind(this))['catch'](n);}.bind(this));};j.pushPermissionIsPending=function(){'use strict';return window.Notification&&window.Notification.permission==='default';};j.pushPermissionIsOn=function(){'use strict';return window.Notification&&window.Notification.permission==='granted';};j.pushPermissionIsDenied=function(){'use strict';return window.Notification&&window.Notification.permission==='denied';};f.exports=j;}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/push\/register\/service_worker\/",{});}),null);
__d('BrowserPushDirectPromptInstaller',['Promise','Arbiter','AsyncRequest','BanzaiLogger','BrowserPushSessionChange.react','CrossWindowEventEmitter','DOM','NotificationPermissionNotice.react','NotificationPermissionRequest.react','NotificationPermissionRequestWithPreview.react','PushRegistration','QE2Logger','React','ReactDOM','XBrowserPushDisabledController','XBrowserPushXOutController','XPushRegisterServiceWorkerController','emptyFunction','incognito'],(function a(b,c,d,e,f,g){var h=new (c('CrossWindowEventEmitter'))('BrowserPushInstall'),i={},j,k=false;function l(event,r){var s=babelHelpers['extends']({event:event,appid:r,surface:'prompt'},i);c('BanzaiLogger').log('BrowserPushLoggerConfig',s);}function m(r){var s=c('XBrowserPushXOutController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(s).setMethod('post').send();l('xout',r);}function n(r){if(!k){k=true;c('ReactDOM').unmountComponentAtNode(r);}}function o(r,s){var t=c('DOM').insertBefore(r,c('DOM').create('span')),u=t.pop();c('ReactDOM').render(c('React').createElement(c('BrowserPushSessionChange.react'),{onHide:function v(){c('ReactDOM').unmountComponentAtNode(r);},push:s}),u);}function p(r,s,t,u,v){var w=c('PushRegistration').get(r,s);l('turn_on',s);return w.registerPushWithFinishedCallBack(c('XPushRegisterServiceWorkerController'),c('AsyncRequest'),function(){o(t,w);},function(){c('Arbiter').inform('BrowserPushInstall/installed');},v).then(function(){n(t);l('install',s);})['catch'](function(x){n(t);if(c('PushRegistration').pushPermissionIsDenied()){c('ReactDOM').render(c('React').createElement(c('NotificationPermissionNotice.react'),{onHide:function y(){c('ReactDOM').unmountComponentAtNode(t);},browserName:u}),t);l('deny',s);}else l('install_ignore',s);m(s);});}var q={setLogExtraData:function r(s){i=s;},setQEUniverseName:function r(s){j=s;},requestThenInstallPush:function r(s,t,u,v,w,x,y,z,aa,ba,ca,da){var ea=c('PushRegistration').get(s,t),fa=ea.isPushRegistered(v,c('XPushRegisterServiceWorkerController'),c('XBrowserPushDisabledController'),c('AsyncRequest'),!!x,function(){o(u,ea);},z);h.once('complete',function(ga){n(u);l('twostep_suppressed',t);});c('Promise').all([fa,c('incognito')()]).then(function(ga){var ha=ga[0],ia=ga[1];if(ha||w||ia)return;if(c('PushRegistration').pushPermissionIsPending()){j&&c('QE2Logger').logExposureForUser(j);if(!aa)return;l('twostep_request',t);c('ReactDOM').render(c('React').createElement(c('NotificationPermissionRequestWithPreview.react'),{notificationImage:ca||undefined,notificationMessage:ba||undefined,onAccept:function ja(ka){l('twostep_accept',t);h.emitRemote('complete');p(s,t,u,y,z).then(ka,ka).done();},onClose:function ja(){l('twostep_notnow',t);h.emitRemote('complete');m(t);n(u);},showSpinnerWhileRequesting:da}),u);}else if(c('PushRegistration').pushPermissionIsOn())p(s,t,u,y,z);})['catch'](c('emptyFunction'));},installPush:function r(s,t,u,v,w,x,y,z,aa){var ba=c('PushRegistration').get(s,t),ca=ba.isPushRegistered(v,c('XPushRegisterServiceWorkerController'),c('XBrowserPushDisabledController'),c('AsyncRequest'),!!x,function(){o(u,ba);},z);c('Promise').all([ca,c('incognito')()]).then(function(da){var ea=da[0],fa=da[1];if(ea||w||fa)return;if(c('PushRegistration').pushPermissionIsPending()){j&&c('QE2Logger').logExposureForUser(j);if(!aa)return;c('ReactDOM').render(c('React').createElement(c('NotificationPermissionRequest.react'),{onHide:function ga(){n(u);}}),u);}p(s,t,u,y,z);})['catch'](c('emptyFunction'));}};f.exports=q;}),null);
__d("XBrowserPushMuteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/mute\/",{appid:{type:"Int",required:true},push_endpoint:{type:"String",required:true},surface:{type:"Enum",required:true,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}});}),null);
__d('BrowserPushMuteOptions',['fbt','AsyncRequest','PushRegistration','React','ReactDOM','XBrowserPushMuteController'],(function a(b,c,d,e,f,g,h){function i(k,l,m){var n=c('PushRegistration').get(l,m);n.getPushSubscription().done(function(o){if(o){var p=c('XBrowserPushMuteController').getURIBuilder().setEnum('surface','jewel').setString('push_endpoint',o.endpoint).setInt('appid',m).getURI();new (c('AsyncRequest'))().setURI(p).setRelativeTo(k).send();}});}var j={showMuteOptions:function k(l,m,n){if(!c('PushRegistration').pushPermissionIsOn())return;c('ReactDOM').render(c('React').createElement('a',{href:'#',onClick:function o(){i(l,m,n);}},h._("Mute")),l);}};f.exports=j;}),null);
__d('BrowserPushNotificationJewelUpsellLogger',['Arbiter','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h='www_browser_notifications_upsell',i={exposeOnVisible:function j(){c('Arbiter').subscribeOnce('notificationJewel/opened',function(){return c('QE2Logger').logExposureForUser(h);});}};f.exports=i;}),null);
__d('ViewasChromeBar',['csx','cx','Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent'],(function a(b,c,d,e,f,g,h,i){var j='ViewasChromeBar/initialized',k=null,l=false;function m(p){c('Arbiter').subscribe(j,p);}function n(p){c('CSS').addClass(p,"_7g7");var q=c('DOM').find(p,"._7g0");c('Focus').set(c('DOM').find(q,'.textInput'));}var o={initChromeBar:function p(q){if(l)return;k=q;l=true;c('Arbiter').inform(j,null,c('Arbiter').BEHAVIOR_STATE);},update:function p(q,r){m(function(){c('DOM').setContent(k,q);if(r)new (c('AsyncRequest'))('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function p(q){c('Event').listen(q,'click',function(){var r=c('Parent').bySelector(q,"._7f-");if(r instanceof HTMLElement)n(r);});},registerFlyoutModalMask:function p(){c('ModalMask').show();c('PageTransitionsRegistrar').registerHandler(c('ModalMask').hide,10);}};f.exports=o;}),null);